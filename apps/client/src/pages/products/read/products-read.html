<app-page-wrapper [waitClient]="false" [eventT]="'INFO'" [isPending]="!item()">
  <ng-template #contentRef>
    <div class="root">
      <div class="root__header">
        <a [routerLink]="'/'" class="header__back_link">
          <div class="back_link__svg">
            <ng-content *ngComponentOutlet="Chevron; inputs: { fill: 'white' }" />
          </div>

          <span class="txt__bd__sm__bold text-blue__dark__0">Go Back</span>
        </a>

        <app-btn-app [label]="'Edit Feedback'" varT="blue" />
      </div>

      @if(item()){ <app-product-item [item]="item()!" [withLink]="true" />}

      <div class="root__comments">
        <div class="comments__title">
          <span class="txt__hd__md text-blue__dark__1"
            >{{ item()?.comments?.length ?? 0 }} Comments</span
          >
        </div>

        <div class="comments__content">
          @for(c of item()?.comments; track c.id; let idx = $index){
          <app-comment-item [comment]="c" [isLast]="idx === (item()?.comments?.length ?? 0) - 1" />
          }
        </div>
      </div>

      <div class="root__comment_form">
        <span class="text-blue__dark__1 txt__hd__md">Add Comment</span>

        <form class="comment_form__content">
          <textarea class="content__field" placeholder="Type your comment here"></textarea>

          <div class="content__footer">
            <span class="text-blue__dark__0 txt__bd__sm__reg">250 Characters left</span>

            <app-btn-app [varT]="'purple'" [label]="'Post Comment'" />
          </div>
        </form>
      </div>
    </div>
  </ng-template>
</app-page-wrapper>
